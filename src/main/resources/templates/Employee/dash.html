<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
          integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
            href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,100..900;1,9..144,100..900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Manrope:wght@200..800&family=Playwrite+GB+J:ital,wght@0,100..400;1,100..400&display=swap"
            rel="stylesheet">


    <title>Dashboard</title>
</head>

<body>
<div class="container">
    <!-- Sidebar -->
    <div class="sidebar" style="width:240px;font-size:16px">
        <div class="heading">
            <h2>HR DIVE</h2>
            <button id="chevron" onclick="toggleMenu()" style="background: transparent; border: none;"><i
                    class="fa-solid fa-chevron-left"></i></button>
        </div>
        <h3>Menu</h3>
        <div class="icons">
            <i class="fa-solid fa-house fa-lg "></i> <a href="/dash">Dashboard</a>
        </div>




        <div class="icons">
            <i class="fas fa-calendar-check fa-lg"></i>  <a href="/attendance">Attendances</a>
        </div>
        <div class="icons">
            <i class="fas fa-plane-departure fa-lg"></i> <a href="/leave">Leave Request</a>
        </div>
        <div class="icons">
            <i class="fas fa-tasks fa-lg"></i> <a href="/etask">Tasks</a>
        </div>

        <div class="icons">
            <i class="fas fa-bullhorn fa-lg"></i> <a href="/announcements">Announcements</a>
        </div>

        <div class="icons">
            <i class="fas fa-headset fa-lg"></i> <a href="/help&support">Help & Support</a>
        </div>

        <div class="icons">
            <i class="fa-solid fa-ticket"></i><a href="/mySupportRequests">Request History</a>
        </div>
        <div class="icons">
            <i class="fa-solid fa-gear fa-lg"></i> <a href="/security">Settings</a>
        </div>
        <div class="icons">
            <form action="/logout" method="POST" style="padding: 0;margin: 0;background: steelblue;box-shadow: none;position: relative;right:10px">
                <button type="submit" class="logout-btn" style="background: transparent;">
                    <i class="fa-solid fa-sign-out-alt"></i> Logout
                </button>
            </form>
        </div>
    </div>

    <!-- Navbar -->
    <div class="navigation">
        <div class="navbar">
            <div class="links">
                <div class="prof">
                    <h3>Welcome back,<span id="employee-name" style="color:steelblue">HR</span></h3>

                </div>
                <div class="links-buttons" style="position:relative;right: 60px;">
                    <form action="/checkout" method="POST" style="display: inline;background: transparent;border: none;box-shadow: none;position: relative;top: 14px;">
                        <button type="submit" class="checkout-btn">
                            <i class="fa-solid fa-clock"></i>Check Out
                        </button>
                    </form>
            </div>
                </div>
            <div class="main-content">
                <div class="dashboard">
                    <div class="dashboard-header">
                        <h1>Overview</h1>
                        <p>Welcome to your dashboard. Here's an overview of your current activities.</p>
                    </div>
                    <div class="dashboard-cards">
                        <div class="card">
                            <h2>Attendance</h2>
                            <p>You are marked <span class="status">present</span> today.</p>
                        </div>
                        <div class="card">
                            <h2>Pending Tasks</h2>
                            <p id="pending">0 pending tasks. <a href="/etask">View tasks</a></p>
                        </div>
                        <div class="card">
                            <h2> Approved Tasks</h2>
                            <p id="approved">0 pending tasks. <a href="/etask">View tasks</a></p>
                        </div>
                        <div class="card">
                            <h2>Leave Request</h2>
                            <p><span class="requests">You have 0 approved leave requests</span></p>
                        </div>

                    </div>
                    <div class="announcements">
                        <h2>Announcements</h2>
                        <p>No new announcements.</p>
                    </div>
                    <div class="attendance-history-section">
                        <h3>Attendance History</h3>
                        <table class="attendance-table">
                            <thead>
                            <tr>
                                <th>Date</th>
                                <th>Time</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>2024-12-08</td>
                                <td>08:30 AM</td>
                            </tr>
                            <tr>
                                <td>2024-12-07</td>
                                <td>08:45 AM</td>
                            </tr>
                            <tr>
                                <td>2024-12-06</td>
                                <td>09:00 AM</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>


            </div>
        </div>

    </div>
</div>

<style>
    .dashboard {
        padding: 20px;
        flex-grow: 1;
        background-color: #f9f9f9;
    }

    .dashboard-header {
        margin-bottom: 20px;
    }

    .dashboard-header h1 {
        font-size: 24px;
        margin-bottom: 5px;
        color: #4682B4;
    }

    .dashboard-header p {
        color: gray;
        font-size: 16px;
    }

    .dashboard-cards {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
    }

    .card {
        flex: 1;
        min-width: 200px;
        padding: 15px;
        background: white;
        border: 1px solid #D1D5DB;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .card h2 {
        margin-bottom: 10px;
        font-size: 18px;
        color: #4682B4;
    }

    .card p {
        margin: 0;
        color: gray;
    }

    .card .status {
        font-weight: bold;
        color: green;
    }

    .announcements {
        margin-top: 20px;
        padding: 15px;
        background: white;
        border: 1px solid #D1D5DB;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .announcements h2 {
        color: #4682B4;
        margin-bottom: 10px;
    }

    .attendance-history-section {
        margin-top: 20px;
        padding: 15px;
        background: #f9f9f9;
        border: 1px solid #d1d5db;
        border-radius: 8px;
    }

    .attendance-history-section h3 {
        margin-bottom: 15px;
        color: #4682b4;
    }

    .attendance-table {
        width: 100%;
        border-collapse: collapse;
    }

    .attendance-table th,
    .attendance-table td {
        border: 1px solid #d1d5db;
        padding: 10px;
        text-align: left;
        font-size: 14px;
        color: #333;
    }

    .attendance-table th {
        background-color: #4682b4;
        color: white;
    }

    .attendance-table tr:nth-child(even) {
        background-color: #f2f2f2;
    }
</style>
<script>
    document.addEventListener('DOMContentLoaded', function() {
       const name = localStorage.getItem('employeeFirstName');
       if (name) {
           document.getElementById('employee-name').textContent = name;
       }

   fetch("latest")
    .then(response => response.json())
    .then(data => {
        const count = data["Latest:"];
        if(count && count > 0) {
            console.log(`You have ${count} new announcement(s) today`);

          document.querySelector('.announcements p').innerHTML =
    `You have <span style="color:steelblue">${count}</span> new announcement(s) today.`;
        } else {
            console.log("No new announcements today");
        }
    })
    .catch(error => {
        console.error("Error fetching announcements:", error);
    });

       fetch(`PendingTasks?status=Pending`)
    .then(response => response.json())
    .then(data => {
        const count = data["Task:"];
        if(count && count > 0) {
            console.log(`You have ${count} pending tasks`);

          document.getElementById("pending").innerHTML =
    `You have <span style="color:steelblue">${count}</span> pending tasks.`;
        } else {
            console.log("No new announcements today");
        }
    })
    .catch(error => {
        console.error("Error fetching announcements:", error);
    });
       fetch(`PendingTasks?status=Approved`)
    .then(response => response.json())
    .then(data => {
        const count = data["Task:"];
        if(count && count > 0) {
            console.log(`You have ${count} approved tasks`);

           document.getElementById("approved").innerHTML =
    `You have <span style="color:steelblue">${count}</span>  approved tasks.`;
        } else {
            console.log("No new announcements today");
        }
    })
    .catch(error => {
        console.error("Error fetching announcements:", error);
    });


      fetch(`ApprovedRequests?status=Approved`)
    .then(response => response.json())
    .then(data => {
        const count = data["Approved:"];
        if(count && count > 0) {
            console.log(`You have ${count} approved leave requests`);

           document.getElementById("requests").innerHTML =
    `You have <span style="color:steelblue">${count}</span>  approved leave requests.`;
        } else {
            console.log("No approved requests");
        }
    })
    .catch(error => {
        console.error("Error fetching announcements:", error);
    });
   });
</script>
</body>

</html>